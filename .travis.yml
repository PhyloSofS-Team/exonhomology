language: python
python:
  - "3.6"
  - "3.7"
  - "3.8"

notifications:
  email: false

install:
  - git clone https://github.com/PhyloSofS-Team/ProGraphMSA.git prographmsa
  - chmod a+x ./prographmsa/bin/ProGraphMSA_64
  - sudo cp ./prographmsa/bin/ProGraphMSA_64 /bin/ProGraphMSA
  - rm -fr prographmsa # clean up
  - python -m pip uninstall -y numpy
  - python -m pip install 'numpy==1.19.5'
  - python -m pip install .
  - python -m pip install coveralls codecov
  - python -m pip install sphinx sphinx_rtd_theme sphinx-argparse

script:
  - export PYTEST_ADDOPTS="--pylint"
  - python setup.py test

after_success:
  - if [[ $TRAVIS_OS_NAME == 'linux' ]]; then coveralls; fi
  - export SPHINX_APIDOC_OPTIONS=members
  - sphinx-apidoc -o docs/source/api thoraxe
  - sphinx-build docs/source docs/build/html
  - ./push_docs.sh

env:
  global:
    - secure: Jd2GwhBFnwKW4vQFcxGeoXs2QEIXg1dGCx9dTn+f3UfMVopt9tGDytwkt9UcIoV1iBVoK/sz+QGAoNVb8Nc7AAFRzfi36JCOao/+bB6+S8jnsMxSG7zb45SHhlOr8oS+YhoseDaG3zOKdNAEQwjD/qwHrttbyR/Vqcp91MaMM1SsDKGGWGJ/W/b5w8dFT7e0apfqgybu5BCoa3k1fQm1i3zVNQkCybRv+Z/Y3xxf16p/S6y3FkxAmo2zjofoGhOw55tZ8kmmq4ppejpOyhOTg4u0o2h1UGPCzhE2ib73HHWtqxCSw4PYhTg4A028vqVkNI/fBYBAj7DLKgJwvoSi2WsDr2gOO1pfWgYw0O+2NR1VseyPXLPizOQhDeOBp5AcultBxTYTf5nTT3wbZhesBCPwkNQVMmHbfJwkR/+4fetBhOQMovA+OrQdaeIH3Kq0T+dKHvZWWbw/HSTmhdjgIs+Sa2YruyWmWRBKXU13EMYZMXg+m1GNQtGCgmLZxqA+DgYPJHn4BEXGx+p62NQ7jDdg+UyShJmNUmO8prHyQmLrB9F3nxGT0BTAIW1kWCKKHt7F97T7TNa+o/teFtGB+84Hg+j6XgMlot36pRgX8090PBzWQ7OCK5wuZOMcFxHjl31g3/xP2OLd3Ipl2OvHLF2xVH0oo4crVT87cSMsZQc=
